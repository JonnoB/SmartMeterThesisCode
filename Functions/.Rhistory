target <- c(target, nearest)
}
nearest <- 1
target <- nearest
for(i in 1:10) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
target <- c(target, nearest)
}
nearest <- 1
target <- nearest
for(i in 1:10) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
#target <- c(target, nearest)
}
nearest <- 1
target <- nearest
for(i in 1:10) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
#data[nearest,] <- NA
print(nearest)
i <-i+1
#target <- c(target, nearest)
}
data <- cbind(x,y)
data <- as.matrix(dist(data))
data <- as.matrix(dist(data), upper = TRUE, diag = TRUE)
data[data ==0] <- NA
nearest <- 1
target <- nearest
for(i in 1:10) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
target <- c(target, nearest)
}
target
x <- c(0.5, 0.6965,1.8229,0.4225,1.0844,0.9201,1.6011,1.960,1.3126,0.6063)
y <- c(0.5, 0.8504, 1.5750,1.0436, 0.5310,1.7178,0.7569,0.1747,1.3507,1.3303)
data <- cbind(x,y)
data <- as.matrix(dist(data))
data <- as.matrix(dist(data), upper = TRUE, diag = TRUE)
data[data ==0] <- NA
data[1,] <- NA
nearest <- 1
target <- nearest
for(i in 1:10) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
target <- c(target, nearest)
}
x <- c(0.5, 0.6965,1.8229,0.4225,1.0844,0.9201,1.6011,1.960,1.3126,0.6063)
y <- c(0.5, 0.8504, 1.5750,1.0436, 0.5310,1.7178,0.7569,0.1747,1.3507,1.3303)
data <- cbind(x,y)
data <- as.matrix(dist(data))
data <- as.matrix(dist(data), upper = TRUE, diag = TRUE)
data[data ==0] <- NA
data[1,] <- NA
nearest <- 1
target <- nearest
for(i in 1:9) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
target <- c(target, nearest)
}
target
data[target]
data1 <- cbind(x,y)
x <- c(0.5, 0.6965,1.8229,0.4225,1.0844,0.9201,1.6011,1.960,1.3126,0.6063)
y <- c(0.5, 0.8504, 1.5750,1.0436, 0.5310,1.7178,0.7569,0.1747,1.3507,1.3303)
data1 <- cbind(x,y)
data <- as.matrix(dist(data1))
data <- as.matrix(dist(data), upper = TRUE, diag = TRUE)
data[data ==0] <- NA
data[1,] <- NA
nearest <- 1
target <- nearest
for(i in 1:9) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
}
data1[target]
target
x <- c(0.5, 0.6965,1.8229,0.4225,1.0844,0.9201,1.6011,1.960,1.3126,0.6063)
y <- c(0.5, 0.8504, 1.5750,1.0436, 0.5310,1.7178,0.7569,0.1747,1.3507,1.3303)
data1 <- cbind(x,y)
data <- as.matrix(dist(data1))
data <- as.matrix(dist(data), upper = TRUE, diag = TRUE)
data[data ==0] <- NA
data[1,] <- NA
nearest <- 1
target <- nearest
for(i in 1:9) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
target <- c(target,nearest)
}
data1[target]
data1[target,]
?lag
data1[target,]-data1[target,]
data1[target,]-lag(data1[target,])
data1[target[-1],]-data1[target[-10],]
data1[target[-1],]
data1[target[-10],]
data1[target[-1],]-data1[target[-10],]
distance <- data1[target[-1],]-data1[target[-10],]
abs(distance[,1])*abs(distance[,1])
sum(abs(distance[,1])*abs(distance[,1]))
sum(sqrt(distance[,1]^2+distance[,2]^2))
sqrt(distance[,1]^2+distance[,2]^2)
distance2 <- data1[-1,]-data1[-10,]
sum(sqrt(distance1[,1]^2+distance1[,2]^2))
distance1 <- data1[-1,]-data1[-10,]
sum(sqrt(distance1[,1]^2+distance1[,2]^2))
x <- c(0.5, 0.6965,1.8229,0.4225,1.0844,0.9201,1.6011,1.960,1.3126,0.6063)
y <- c(0.5, 0.8504, 1.5750,1.0436, 0.5310,1.7178,0.7569,0.1747,1.3507,1.3303)
data1 <- cbind(x,y)
x <- c(0.5, 0.6965,1.8229,0.4225,1.0844,0.9201,1.6011,1.960,1.3126,0.6063)
y <- c(0.5, 0.8504, 1.5750,1.0436, 0.5310,1.7178,0.7569,0.1747,1.3507,1.3303)
data1 <- cbind(x,y)
data <- as.matrix(dist(data1), upper = TRUE, diag = TRUE)
data[data ==0] <- NA
data[1,] <- NA
nearest <- 1
target <- nearest
for(i in 1:9) {
nearest <- which(data[,nearest] == min(data[,nearest], na.rm= TRUE))
data[nearest,] <- NA
print(nearest)
i <-i+1
target <- c(target,nearest)
}
distance1 <- data1[-1,]-data1[-10,]
sum(sqrt(distance1[,1]^2+distance1[,2]^2))
distance2 <- data1[target[-1],]-data1[target[-10],]
sum(sqrt(distance2[,1]^2+distance2[,2]^2))
distance1 <- data1[-1,]-data1[-10,]
total_orig <- sum(sqrt(distance1[,1]^2+distance1[,2]^2))
distance2 <- data1[target[-1],]-data1[target[-10],]
total_nn <- sum(sqrt(distance2[,1]^2+distance2[,2]^2))
total_orig -total_nn
?signif
signif(diff)
diff <- total_orig -total_nn
signif(diff)
signif(diff,3)
packages <- c("dplyr", "ggplot2", "magrittr")
lapply(packages, library, character.only = TRUE)
```
```{r}
url <- "https://www.dropbox.com/s/7t62s5yevc9pwc8/london-borough-profiles.csv?dl=0"
data <- read.table("london-borough-profiles.csv",header= TRUE, sep=",", na.strings = c("", " ","."), stringsAsFactors = FALSE)
data2x <- data[,c(3,52,60,70,65,49,50)]
data2 <- data2x %>% mutate_each( funs(
sub( pattern = ",", replacement = "", .))) %>%
mutate_each(funs(as.numeric), -Area.name)
data2 <- data2[complete.cases(data2),]
packages <- c("dplyr", "ggplot2", "magrittr")
lapply(packages, library, character.only = TRUE)
```
```{r}
url <- "https://www.dropbox.com/s/7t62s5yevc9pwc8/london-borough-profiles.csv?dl=0"
data <- read.table("london-borough-profiles.csv",header= TRUE, sep=",", na.strings = c("", " ","."), stringsAsFactors = FALSE)
data2x <- data[,c(3,52,60,70,65,49,50)]
data2 <- data2x %>% mutate_each( funs(
sub( pattern = ",", replacement = "", .))) %>%
mutate_each(funs(as.numeric), -Area.name)
data2 <- data2[complete.cases(data2),]
sweep(data2[,2:7], MARGIN=2, x, FUN = "/")
?sweep
sweep(as.array(data2[,2:7]), MARGIN=2, x, FUN = "/")
?array
as.array(data[,2:7])
sweep(as.matrix(data2[,2:7]), MARGIN=2, x, FUN = "/")
View(data2)
as.matrix(data[,2:7])
sapply(data,class)
sapply(data2,class)
as.matrix(as.numeric(data[,2:7]))
class(data[,2:7])
x <-  lapply(data2[,2:7], max)
x
x <-  lapply(data2[,2:7], data[,n]/max(n))
x <-  lapply(data2[,2:7], function(n)data[,n]/max(n))
x <-  lapply(data2[,2:7], function(n) data[,n]/max(data[,n]))
x <-  lapply(2:7, function(n) data[,n]/max(data[,n]))
sweep(as.matrix(data2[,2:7]), MARGIN=2, x, FUN = "/")
x <-  lapply(2:7, function(n) data[,n]/max(data[,n]))
dput(data2)
dput(data2[1:10,1:3])
x <- structure(list(Area.name = c("Barking and Dagenham", "Barnet",
"Bexley", "Brent", "Bromley", "Camden", "Croydon", "Ealing",
"Enfield", "Greenwich"), Median.House.Price..2014 = c(215000,
4e+05, 250000, 385000, 335000, 675000, 265000, 388000, 285000,
317000), Total.carbon.emissions..2013. = c(783.2, 1552.7, 1060.9,
1292.6, 1334.7, 1540.5, 1452.2, 1567.3, 1397.5, 1004.5)), .Names = c("Area.name",
"Median.House.Price..2014", "Total.carbon.emissions..2013."), row.names = 2:11, class = "data.frame")
n <- 2
data[,n]/max(data[,n])
n <- 3
data[,n]/max(data[,n])
data[,3]/max(data[,3])
max(data[,3])
x <-  lapply(2:7, function(n) data2[,n]/max(data2[,n]))
bind_cols(x)
x <-  lapply(2:7, function(n) as.data.frame(data2[,n]/max(data2[,n])))
bind_cols(x)
data2[,2:7] <- bind_cols(x)
View(data2)
names(data2)
x <-  lapply(c(2,3,5,6,7), function(n) as.data.frame(1/data2[,n])
data[,-c(1,4)] <- bind_cols(x)
x <-  lapply(c(2,3,5,6,7), function(n) as.data.frame(1/data2[,n]))
data[,-c(1,4)] <- bind_cols(x)
View(data2)
cite(caret)
cite("caret")
library(caret)
cite("caret")
library(caret)
cite(caret)
choose(7,1)
x2 <- 1 + choose(x,1) + choose(x,2)
x <- 2:7
x2 <- 1 + choose(x,1) + choose(x,2)
prod(x2)
2*prod(x2)
sqrt(28)
x <- c(3, 0, 5)
x <- c(3, 0, 5)
p=2
x2 <- (sum(x^p))^-p
sum(x^p)
x2 <- (sum(x^p))^(1/p)
p=3
x2 <- (sum(x^p))^(1/p)
p=2
x2 <- (sum(x^p))^(1/p)
p=20
x2 <- (sum(x^p))^(1/p)
0/5
sum(x^p)^y
sum(x^y)^p
p=4
y =2
sum(x^p)^y
sum(x^y)^p
```
x <- c(2, 3, 4,10)
p=2
y =0
x2 <- (sum(x^p))^(1/p)
x <- c(2, 3, 4,10)
p=2
y =0
(sum(x^p))^(1/p)
x <- c(2, 3, 4,10)
p=1
y =0
(sum(x^p))^(1/p)
x <- c(2, 3, 4,)
p=1
y =0
(sum(x^p))^(1/p)
x <- c(2, 3, 4,)
p=1
y =0
(sum(x^p))^(1/p)
x <- c(2, 3, 4)
p=1
y =0
(sum(x^p))^(1/p)
x <- c(2, 3, 4)
p=2
y =0
(sum(x^p))^(1/p)
x <- c(1, 1, 1)
p= c(1,2)
y =0
(sum(x^p))^(1/p)
x <- c(1, 1, 1)
p1= 1
p2 =2
c(  max(x),(sum(x^p2))^(1/p2),  (sum(x^p1))^(1/p1))
x <- c(.1, .1, .1)
p1= 1
p2 =2
c(  max(x),(sum(x^p2))^(1/p2),  (sum(x^p1))^(1/p1))
x <- c(0.9, 0.9, 0.9)
p1= 1
p2 =2
c(  max(x),(sum(x^p2))^(1/p2),  (sum(x^p1))^(1/p1))
x <- c(0.5, 0.5, 0.5)
p1= 1
p2 =2
c(  max(x),(sum(x^p2))^(1/p2),  (sum(x^p1))^(1/p1))
x <- c(0.33, 0.33, 0.33)
p1= 1
p2 =2
c(  max(x),(sum(x^p2))^(1/p2),  (sum(x^p1))^(1/p1))
x <- c(0, 0, 6)
p1= 1
p2 =2
c(  max(x),(sum(x^p2))^(1/p2),  (sum(x^p1))^(1/p1))
x <- 1:8
x2 <- 1 + choose(x,1) + choose(x,2)
x2
sum(x2)
2*prod(x2)
x <- 2:7
x2 <- 1 + choose(x,1) + choose(x,2)
x2
sum(x2)
prod(x2)*2
(6*9+4*5)/10
(6*9+2*5)/8
18*800000
3000000/25
x <- 2:7
x2 <- 1 + choose(x,1) + choose(x,2)
x2
2+sum(x2)
combn(1:4,4)
combn(letters[1:4], 2)
combn(letters[1:4], 3)
combn([1:4], 3)
combn(1:4, 3)
combn(1:4, 4)
combn(1:4, 1)
combn(1:4, 3)
expand.grid(0:1, 0:1, 0:1)
expand.grid(1:4, 1:4, 1:4)
combn(1:4,4)
combn(1:4)
combn(1:4,1)
combn(1:4,2)
combn(1:4,3)
permn(1:4,3)
require(gtools)
permutations(n = 9, r = 3, v = 1:9)
?permutations
permutations(n = 4, r = 4, v = 1:4)
R.Version()
install.packages(c("BH", "car", "caret", "digest", "earth", "ggplot2", "git2r", "htmltools", "knitr", "pbkrtest", "plotrix", "Rcpp", "rJava", "rmarkdown", "rstudioapi", "tidyr"))
install.packages(c("BH", "car", "caret", "digest", "earth", "ggplot2", "git2r", "htmltools", "knitr", "pbkrtest", "plotrix", "Rcpp", "rJava", "rmarkdown", "tidyr"))
1-(1-0.95)^21
1-(1-0.05)^21
log(756)
(0.7-0.45*0.35)/0.65
(0.7-0.45*0.35-0.9*0.15)/0.5
library(dplyr)
data.frame(numbers = 1:20) %>% mutate(log = log(numbers), other = numbers-1)
data.frame(numbers = (1:20)/20) %>% mutate(log = log(numbers), other = numbers-1)
?return
4/30
4/27
3/27
matrix(0, ,6,6)
matrix(0, 6,6)
mat1 <- matrix(0, 6,6)
mat1[-c(5:6), -c(1:2)]
mat1[-c(5:6), -c(1:2)] <- diag(4)
mat1
mat1 <- matrix(0, 6,6)
mat1[-c(5:6), -c(1:2)] <- diag(4)
mat1[1,2] <-1
mat1[5,1] <-1
mat1
mat1 <- matrix(0, 6,6)
mat1[-c(5:6), -c(1:2)] <- diag(4)
mat1[1,2] <-1
mat1[5,6] <-1
mat1
mat1 %*% mat1
mat1 %*% mat1 %*% mat1
mat1 %*% mat1 %*% mat1 %*% mat1
mat2 <- mat1 + t(mat1)
mat2
mat2 %*% mat2 %*% mat1
chord3 <- mat2 %*% mat2 %*% mat1
chord3 <- mat2 %*% mat2 %*% mat2
chord3
four <- chord3 %*% mat2
four
chord3 <- mat2 %*% mat2 #%*% mat2
chord3
chord3 >1
chord
chord3
chord3 >0
chord3 >1
chord3 >0
four
triang <- mat2
mat2
triang[-2, 2]
triang[-2, 2] <-1
triang
triang %*% triang
triang %*% triang %*% triang
triang %*% triang %*% triang %>% triang
triang %*% triang %*% triang %*% triang
mat2 %*% mat2 #%*% mat2
trace(chord3)
?trace
View(triang)
chird3
chord3
mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2
mat2
mat2 %*% mat2
mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2
22/6
22/12
22/11
mat2 %*% mat2
mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2
mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2
mat2 %*% mat2
mat2 %*% mat2
mat2 %*% mat2 %*% mat2
mat2 %*% mat2
mat2
mat2 %*% mat2
mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2
mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2
mh.gamma <- function(n.sims, start, burnin, cand.sd, shape, rate) {
theta.cur <- start
draws <- c()
theta.update <- function(theta.cur, shape, rate) {
theta.can <- rnorm(1, mean = theta.cur, sd = cand.sd)
accept.prob <- dgamma(theta.can, shape = shape, rate = rate)/dgamma(theta.cur,
shape = shape, rate = rate)
if (runif(1) <= accept.prob)
theta.can
else theta.cur
}
for (i in 1:n.sims) {
draws[i] <- theta.cur <- theta.update(theta.cur, shape = shape,
rate = rate)
}
return(draws[(burnin + 1):n.sims])
}
mh.draws <- mh.gamma(10000, start = 1, burnin = 1000, cand.sd = 2, shape = 1.7, rate = 4.4)
mh.draws
0.2/0.25
mat1 <- matrix(0, 6,6)
mat1[-c(5:6), -c(1:2)] <- diag(4)
mat1[1,2] <-1
mat1[5,6] <-1
mat1
mat1^2
mat2 %*% mat2 %*% mat2 %*% mat2
mat2 <- mat1 + diag(6)
mat2
mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2
mat1^2mat1
mat1
mat2 <- mat1 + t(mat1) #diag(6)
chord3 <- mat2 %*% mat2 %*% mat2 %*% mat2 %*% mat2
chord3 <- mat2 %*% mat2 %*% mat2 %*% mat2
chord3 <- chord3 +chord3 %*% mat2
chord3
mat2 <- mat1
chord3 <- mat2 %*% mat2 %*% mat2 %*% mat2
chord3 <- chord3 +chord3 %*% mat2
chord3
packages <-c("stringr", "lubridate", "data.table", "R.utils", "corrplot", "Hmisc", "Amelia", "Matrix", "ff", "ggdendro", "zoo", "igraph","dplyr", "magrittr", "ggplot2", "tidyr", "xtable")
new.packages <- packages[!(packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)
sapply(packages, library, character.only = TRUE)
```
Project Folders
```{r}
basewd <- "C:/Users/pc1/Documents/Thesis Data"
Figures <- file.path("C:/Users/pc1/Dropbox/Apps/ShareLaTeX/University College London thesis/Figures")
functioncode <- file.path(basewd, "Functions")
SubDataSets <- file.path(basewd, "SubDataSets")
datafile <- file.path(basewd, "TC1a")
daytimeseries <-file.path(basewd,"clusterA")
#setwd(file.path(basewd,"Power-Networks-LCL-June2015(withAcornGps).csv_Pieces"))
Cormats <- file.path(basewd,"Cormats")
```
Source functions
```{r}
setwd(functioncode)
sapply(list.files(), source)
```
install.packages("propergate")
r()
